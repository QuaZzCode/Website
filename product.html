<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Leather Keychain Customizer</title>

  <!-- CSS -->
  <link rel="stylesheet" href="assets/css/body.css">
  <link rel="stylesheet" href="assets/css/cart.css">
  <link rel="stylesheet" href="assets/css/login.css">
  <link rel="stylesheet" href="assets/css/navbar.css">
  <link rel="stylesheet" href="assets/css/product/product_page.css">

  <!-- Ionicons -->
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
</head>
<body>

  <!-- NAVBAR -->
  <nav class="navbar">
    <div class="navbar_container">
      <div class="logo_container">
        <div class="navbar_logo">
          <img src="images/Eternal_Key_UF_logo_cropped.png" alt="Eternal Key UF logo">
        </div>
      </div>

      <div class="navbar_toggle" id="mobile-menu">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
      </div>

      <ul class="navbar_menu">
        <li class="navbar_item"><a href="index.html" class="navbar_links">Home</a></li>
        <li class="navbar_item"><a href="#products" class="navbar_links">Products</a></li>
        <li class="navbar_item"><a href="" class="navbar_links">About Us</a></li>
        <li class="navbar_item"><a href="" class="navbar_links">Contact</a></li>

        <li class="navbar_item" id="signinNavItem">
          <div class="nav-buttons">
            <button id="authButtonLogIn" class="nav-btn login_button">Log In</button>
            <button id="authButtonSignUp" class="nav-btn signup_button">Sign Up</button>
          </div>
        </li>

        <!-- Profile section -->
        <div class="navbar_profile" id="navbarProfile" style="display:none;">
          <span class="navbar_username" id="navbarUsername"></span>
          <button id="profileButton" class="profile-btn">
            <ion-icon name="person-circle-outline"></ion-icon>
          </button>
          <div id="profileMenu" class="profile-menu">
            <p id="profileUsername"></p>
            <button id="logoutBtn">Log Out</button>
          </div>
        </div>

      </ul>
       <li class="navbar_item cart-wrapper">
      <div class="cart-icon" id="cartIcon">
        <ion-icon name="cart-outline"></ion-icon>
        <ion-icon id="cartArrow" name="chevron-down-outline" class="cart-arrow"></ion-icon>
        <span id="cartCount">0</span>
      </div>

      <div id="cartPanel" class="cart-panel">
        <h3>Your Cart</h3>
        <div id="cartItems"></div>
       <div class="cart-footer">

          <!-- Subtotal -->
          <div class="cart-total">
            <span>Subtotal:</span>
            <span id="cartSubtotal">0 kr</span>
          </div>

          <!-- Shipping -->
          <div class="cart-total">
            <span>Shipping (PostNord):</span>
            <span id="cartShipping">49 kr</span>
          </div>

          <!-- Final total -->
          <div class="cart-total final-total">
            <span>Total:</span>
            <span id="cartTotal">0 kr</span>
          </div>

          <!-- Legal notice -->
          <p class="checkout-legal">
            By clicking “Checkout”, you agree to our
            <a href="/terms.html" target="_blank">terms</a> and confirm that this order
            includes a payment obligation.
          </p>

          <button id="checkoutBtn" class="checkout-btn">Checkout</button>
        </div>
      </div>
    </div>
    </div>
  </nav>

  <!-- CUSTOMIZER -->
  <div class="container">

  <!-- PREVIEW -->
  <div class="preview-area">
      <button id="flip-btn" class="flip-btn">
    <ion-icon name="reload-outline"></ion-icon>
  </button>
    <div class="keychain-preview">
      <img id="base-layer" class="layer">
      <img id="leather-layer" class="layer">
      <img id="stitch-layer" class="layer">
      <img id="button-layer" class="layer">
      <img id="shape-layer" class="layer">
    </div>
  </div>

  <!-- OPTIONS -->
  <div class="options">
    <h2>Leather Keychain</h2>

    <!-- LEATHER -->
    <div class="category">
      <p>Leather</p>
      <div class="sub-options" id="Leather-options">
        <div class="color-square" style="background:#3d2d17" data-option="leather" data-value="brown"></div>
        <div class="color-square" style="background:#fff" data-option="leather" data-value="white"></div>
        <div class="color-square" style="background:#000" data-option="leather" data-value="black"></div>

      </div>
    </div>

    <!-- STITCHES -->
    <div class="category">
      <p>Stitches</p>
      <div class="sub-options" id="stitch-options">
        <div class="color-square" style="background:#3d2d17" data-option="stitch" data-value="brown"></div>
        <div class="color-square" style="background:#fff" data-option="stitch" data-value="white"></div>
        <div class="color-square" style="background:red" data-option="stitch" data-value="red"></div>
        <div class="color-square" style="background:blue" data-option="stitch" data-value="blue"></div>
        <div class="color-square" style="background:purple" data-option="stitch" data-value="purple"></div>
        <div class="color-square" style="background:pink" data-option="stitch" data-value="pink"></div>
        <div class="color-square" style="background:black" data-option="stitch" data-value="black"></div>

        <div class="option-price" data-price-for="stitch">+5 kr</div>
      </div>
    </div>

    <!-- BUTTONS -->
    <div class="category">
      <p>Button</p>
      <div class="sub-options" id="button-options">
        <div class="color-square" style="background:#000" data-option="button" data-value="black"></div>
        <div class="color-square" style="background:#cfcfcf" data-option="button" data-value="silver"></div>
        <div class="color-square" style="background:#e2cf23" data-option="button" data-value="gold"></div>

        <div class="option-price" data-price-for="button">+5 kr</div>
      </div>
    </div>

    <!-- SHAPES -->
    <div class="category">
      <p>Pressed Shape</p>
      <div class="sub-options" id="shape-options">
        <img class="icon" src="images/icons/heart.png" data-option="shape" data-value="weird">
        <img class="icon" src="images/icons/star.png" data-option="shape" data-value="rose">
        <img class="icon" src="images/icons/circle.png" data-option="shape" data-value="paw">

        <div class="option-price" data-price-for="shape">+5 kr</div>
      </div>
    </div>

    <div id="price-box">
    <span id="price-value">100 kr</span>
  </div>

    <button class="buy-btn">Add to cart</button>
  </div>
</div>

  <!-- SIGNUP Modal -->
  <div id="signupModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>Create Account</h2>
      <form id="signupForm">
        <label for="signupUsername">Username</label>
        <input id="signupUsername" type="text" required placeholder="Your username" />
        <label for="email">Email</label>
        <input id="email" type="email" required placeholder="you@example.com" />
        <label for="password">Password</label>
        <div class="password-wrapper">
          <input id="password" type="password" required placeholder="At least 6 characters" />
          <button type="button" class="toggle-password">
            <ion-icon name="eye-outline"></ion-icon>
          </button>
        </div>
        <button type="submit" class="signup-btn">Sign Up</button>
        <p class="switch-text">Already have an account? <a href="#" id="loginLink">Log in</a></p>
      </form>
    </div>
  </div>

  <!-- LOGIN Modal -->
  <div id="loginModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>Login</h2>
      <form id="loginForm">
        <label for="loginEmail">Email</label>
        <input id="loginEmail" type="email" required placeholder="you@example.com" />
        <label for="loginPassword">Password</label>
        <div class="password-wrapper">
          <input id="loginPassword" type="password" required placeholder="Your password" />
          <button type="button" class="toggle-password">
            <ion-icon name="eye-outline"></ion-icon>
          </button>
        </div>
        <button type="submit" class="signup-btn">Log In</button>
        <p class="switch-text">Don't have an account? <a href="#" id="signupLink">Sign up</a></p>
      </form>
    </div>
  </div>

  <!-- JS -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script type="module" src="assets/js/product_page.js"></script>
  <script type="module" src="assets/js/menu.js"></script>
  <script type="module" src="assets/js/supabase-config.js"></script>
  <script type="module" src="assets/js/supabase-login.js"></script>
  <script type="module" src="assets/js/supabase-cart.js"></script>
</body>
</html>
